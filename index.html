<!DOCTYPE html>
<html>
<body>
<h2>Period tracker sample</h2>
<button onclick="postMessage('get_access_token')">Get Info</button>
<button onclick="postMessage('refresh_access_token')">Refresh Access Token</button>
<p id="demo"></p>
<script>

    function postMessage(operation) {
    try {
       let requestCode = "user_auth."+operation;
        let json = {
           "request_id":"1235",
           "request_body":{
              "request_code" : requestCode,
              "data": {
              }
           },
           "callback":"JSMethodToSendResponse"
        }
        alert("Request is : "+json);
        if (window.JSToNativeBridge != undefined && JSToNativeBridge.callToNative) {
        	alert("Calling : "+JSToNativeBridge.callToNative(json));
            JSToNativeBridge.callToNative(json);
        } else if (window.webkit && window.webkit.messageHandlers && window.webkit.messageHandlers.JSToNativeBridge && window.webkit.messageHandlers.JSToNativeBridge.postMessage) {
            alert("Calling : "+window.webkit.messageHandlers.JSToNativeBridge.postMessage(json));
            window.webkit.messageHandlers.JSToNativeBridge.postMessage(json);
        } else {
            var response = {};
            response['status'] = 'failure';
            response['error'] = {
                message: 'JSToNativeBridge not supported by browser'
            };
    } }
    catch(err) {
    	alert("In catch block");
        alert("Error : "+err);
    }

    }
 function JSMethodToSendResponse(string) {
      alert("Response : "+string);
    }

</script>
<h3></h3>
</body>
</html>